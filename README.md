Wan22 Video Generator
Overview

The Wan22 Video Generator is a local application built with React (UI) and Python (API/backend). It connects to a locally running ComfyUI server to generate Wan22-based videos. Because ComfyUI/Wan22 is limited to producing clips of around 5 seconds, this application enables users to create longer videos by breaking them into segments and stitching them together.

How It Works
Segments

A segment is a short video clip generated by ComfyUI (typically 5 seconds max).

To create a longer video, the user defines:

Total duration

Number of segments

Example: A 10-second video → 2 segments × 5 seconds each.

Segment Generation Workflow
1. Segment 1

The user provides:

A starting image

A prompt

The app injects these into a Wan22 i2v workflow template and submits it to the ComfyUI server.

2. Subsequent Segments

For each additional segment:

When a segment completes, the backend:

Downloads the final frame of the output clip.

Makes it available to the UI as the starting image for the next segment.

The user enters a new prompt for the next segment.

The backend generates the next segment using this updated input.

3. Final Video

After all segments are generated, the backend automatically:

Stitches the segment videos together (e.g., using ffmpeg).

Produces a single final video.

Jobs and Queueing
Jobs

A job is a full video request consisting of:

One or more video segments

Their associated inputs (starting images, prompts)

Workflow settings

The final stitched output

Local Job Queue

To avoid overwhelming ComfyUI, the backend includes a lightweight local queue system.

The queue:

Stores pending jobs

Submits only one segment at a time to ComfyUI

Waits for ComfyUI processing to complete

Fetches outputs and moves to the next segment

Marks a job complete when all segments are finished and stitched

This keeps processing predictable and prevents ComfyUI overload.

Architecture
Frontend — React

Responsible for:

Creating and configuring jobs

Duration

Segment count

Prompts

Starting image

Displaying:

Segment outputs

Final-frame previews

Job and segment status

Final stitched video

Communicates with the backend via a REST API.

Backend — Python

Responsible for:

Exposing REST API endpoints for job creation, status, segment control, and result retrieval

Managing the local job queue

Submitting workflow runs to ComfyUI and polling for results

Downloading segment outputs

Extracting final frames

Stitching all segments into the final video

The backend holds a Wan22 i2v workflow template and injects variables like:

Starting image

Prompt

Seed (optional)

Duration

before submitting each segment to ComfyUI.

Final Output

When all segments are complete:

Segment MP4s are stitched into a single final video

Metadata is stored (segment prompts, timestamps, duration)

The UI displays the final result for download or further use
